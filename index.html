<script>
const passwordInput = document.getElementById("password");
const result = document.getElementById("result");
const details = document.getElementById("details");
const strengthBar = document.getElementById("strength-bar");

passwordInput.addEventListener("input", function () {
  const password = passwordInput.value;
  details.innerHTML = "";

  const checks = [
    { label: "Au moins 8 caractères", test: password.length >= 8 },
    { label: "Une majuscule (A-Z)", test: /[A-Z]/.test(password) },
    { label: "Un chiffre (0-9)", test: /[0-9]/.test(password) },
    { label: "Un symbole (!@#$...)", test: /[^A-Za-z0-9]/.test(password) }
  ];

  let score = 0;

  checks.forEach(check => {
    const li = document.createElement("li");
    li.textContent = (check.test ? "✅ " : "❌ ") + check.label;
    details.appendChild(li);
    if (check.test) score++;
  });

  // Gestion de la barre
  let percentage = (score / 4) * 100;
  strengthBar.style.width = percentage + "%";

  if (score <= 1) {
    strengthBar.style.backgroundColor = "red";
  } else if (score <= 3) {
    strengthBar.style.backgroundColor = "orange";
  } else {
    strengthBar.style.backgroundColor = "green";
  }

  // Texte résultat
  if (password.length === 0) {
    result.textContent = "Résultat : —";
    result.style.color = "#000";
    details.innerHTML = "";
    strengthBar.style.width = "0%";
    strengthBar.style.backgroundColor = "transparent";
  } else if (score <= 1) {
    result.textContent = "❌ Mot de passe faible";
    result.style.color = "red";
  } else if (score <= 3) {
    result.textContent = "⚠️ Mot de passe moyen";
    result.style.color = "orange";
  } else {
    result.textContent = "✅ Mot de passe fort";
    result.style.color = "green";
  }
});
</script>
